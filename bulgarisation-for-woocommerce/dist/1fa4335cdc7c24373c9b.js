(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{114:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apm=void 0,o(120);var n=a(o(119)),i=a(o(325));function a(e){return e&&e.__esModule?e:{default:e}}t.apm=n.default.extend({render:function(e){return e(i.default)}})},125:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setCookie=function(e,t,o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);var i="expires="+n.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},t.getCookie=function(e){for(var t=e+"=",o=decodeURIComponent(document.cookie).split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},t.resizeBase64=function(e,t,o,n,i,a,s){var r=document.createElement("canvas"),d=r.getContext("2d"),c=document.createElement("canvas"),l=c.getContext("2d"),m=new Image;m.src=e,m.onload=function(){var e=a(m.width,m.height,t,o),u=e.width,p=e.height;c.width=m.width,c.height=m.height,l.drawImage(m,0,0),r.width=m.width*u,r.height=m.height*p,d.imageSmoothingEnabled=!0,d.mozImageSmoothingEnabled=!0,d.oImageSmoothingEnabled=!0,d.webkitImageSmoothingEnabled=!0,d.imageSmoothingQuality="high",l.imageSmoothingEnabled=!0,l.mozImageSmoothingEnabled=!0,l.oImageSmoothingEnabled=!0,l.webkitImageSmoothingEnabled=!0,l.imageSmoothingQuality="high",d.drawImage(c,0,0,c.width,c.height,0,0,r.width,r.height),s(r.toDataURL(n,i))},m.onerror=function(){console.log("Error while loading image.")}},t.ratioFunction=function(e,t,o,n){var i=1,a=1;return e>o&&(i=o/e),t>n&&(a=n/t),a<i&&(i=a),{width:i,height:i}}},186:function(e,t,o){"use strict";o.r(t);var n=o(187),i=o.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return n[e]}))}(a);t.default=i.a},187:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=o(125),i=d(o(121)),a=d(o(7)),s=d(o(8)),r=d(o(122));function d(e){return e&&e.__esModule?e:{default:e}}o(144),t.default={components:{Multiselect:r.default},data:function(){return{Address1Field:"",selectedApm:[],apms:[],error:"",document:e(document.body),i18n:wooBg_boxnow.i18n}},computed:{apmLocatorUrl:function(){var e=this;return setTimeout((function(){e.initApmLocator()}),50),"https://widget-v5.boxnow.bg/popup.html?gps=yes&autoselect=yes&autoclose=yes"}},mounted:function(){var t=this;this.loadLocalStorage(),this.checkFields(),e("#ship-to-different-address-checkbox").on("change",(function(){t.checkFields()})),this.loadApms(),this.initApmLocator(),this.document.on("update_checkout.onUpdate",this.onUpdate),window.boxnowApmInitialUpdate&&(this.document.trigger("update_checkout"),window.boxnowApmInitialUpdate=!1,this.setAddress1FieldData())},methods:{setApmFromLocator:function(t){if("https://widget-v5.boxnow.bg"===t.origin){var o=t.data.boxnowLockerId;if(this.apms.length){var n=this;this.apms.forEach((function(e){e.id==o&&(n.selectedApm=e,n.setApm())}))}e.magnificPopup.close()}},initApmLocator:function(){e("#woo-bg--boxnow-apm-locator").magnificPopup({type:"iframe",midClick:!0,iframe:{markup:'<iframe class="mfp-iframe" src="https://widget-v5.boxnow.bg/popup.html?gps=yes&autoselect=yes&autoclose=yes" frameborder="0" allowfullscreen></iframe>'},callbacks:{open:function(){e(".mfp-iframe").css("width","100%"),e(".mfp-iframe").css("height","100%"),e(".mfp-bg.mfp-ready").css("background","none"),e(".mfp-container").css("padding","0"),e(".mfp-content").css("max-width","100%"),e(".mfp-content").css("height","100%")}}}),window.addEventListener("message",this.setApmFromLocator,!1)},compileLabel:function(e){var t=e.name,o=e.addressLine1;return t+" ("+e.addressLine2+" - "+o+")"},checkFields:function(){e("#ship-to-different-address-checkbox").is(":checked")?this.Address1Field=e("#shipping_address_1"):this.Address1Field=e("#billing_address_1")},loadLocalStorage:function(){var e=localStorage.getItem("woo-bg--boxnow-apm");e&&(e=JSON.parse(e),this.apms=(0,i.default)(e.apms),this.selectedApm=(0,i.default)(e.selectedApm))},loadApms:function(){this.loading=!0;var e=this;a.default.post(woocommerce_params.ajax_url,s.default.stringify({action:"woo_bg_boxnow_load_apms"})).then((function(t){e.error="";var o=[];t.data.data.apms.length?e.apms=(0,i.default)(t.data.data.apms):(e.error=t.data.data.error,e.resetData()),e.apms.forEach((function(t){e.selectedApm&&e.selectedApm.id==t.id&&(o=t)})),e.selectedApm=(0,i.default)(o),e.setCookieData(),e.loading=!1})).catch((function(t){e.message="Имаше проблем. За повече информация вижте конзолата.",console.log(t),e.loading=!1}))},setApm:function(){this.setLocalStorageData(),this.setAddress1FieldData(),this.document.trigger("update_checkout")},setCookieData:function(){var e={selectedApm:this.selectedApm?this.selectedApm.id:null};e=encodeURIComponent(JSON.stringify(e)),(0,n.setCookie)("woo-bg--boxnow-apm",e,1)},setLocalStorageData:function(){var e={selectedApm:this.selectedApm,apms:this.apms};localStorage.setItem("woo-bg--boxnow-apm",JSON.stringify(e))},resetData:function(){this.apms=(0,i.default)([]),this.selectedApm="",localStorage.removeItem("woo-bg--boxnow-apm"),this.setCookieData()},setAddress1FieldData:function(){var e="";this.selectedApm&&this.selectedApm.name&&(e=this.i18n.toApm+this.selectedApm.name+" ( "+this.selectedApm.addressLine2+" - "+this.selectedApm.addressLine1+" ) "),this.Address1Field.val(e)},triggerUpdateCheckout:function(){this.document.trigger("update_checkout")},onUpdate:function(){this.setCookieData()}},beforeDestroy:function(){this.document.off("update_checkout.setCookieApm"),this.document.off("update_checkout.onUpdate"),window.removeEventListener("message",this.setApmFromLocator,!1)}}}).call(this,o(0))},220:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.render=function(){var e=this,t=e._self._c;return t("div",{staticClass:"woo-bg--boxnow-delivery"},[e.error?t("div",{staticClass:"woo-bg--apm-error"},[e._v(e._s(e.error))]):t("div",[t("multiselect",{staticClass:"woo-bg-multiselect",attrs:{id:"ajax",placeholder:"","track-by":"id",label:"name","deselect-label":"","open-direction":"bottom","options-limit":1e3,limit:6,"max-height":600,selectedLabel:e.i18n.selected,selectLabel:e.i18n.select,options:e.apms,"custom-label":e.compileLabel,multiple:!1,searchable:!0,"show-no-results":!0},on:{input:e.setApm},model:{value:e.selectedApm,callback:function(t){e.selectedApm=t},expression:"selectedApm"}},[t("span",{attrs:{slot:"noResult"},slot:"noResult"},[e._v(e._s(e.i18n.noResult))]),e._v(" "),t("span",{attrs:{slot:"noOptions"},slot:"noOptions"},[e._v(e._s(e.i18n.noOptions))]),e._v(" "),t("span",{attrs:{slot:"placeholder"},slot:"placeholder"},[e._v(e._s(e.i18n.searchApm))])]),e._v(" "),t("a",{attrs:{id:"woo-bg--boxnow-apm-locator",href:e.apmLocatorUrl}},[e._v(e._s(e.i18n.apmLocator))])],1)])},t.staticRenderFns=[]},31:function(e,t){},325:function(e,t,o){"use strict";o.r(t);var n=o(326),i=o(186);for(var a in i)["default"].indexOf(a)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(a);var s=o(116),r=Object(s.a)(i.default,n.render,n.staticRenderFns,!1,null,null,null);t.default=r.exports},326:function(e,t,o){"use strict";var n=o(220);o.o(n,"render")&&o.d(t,"render",(function(){return n.render})),o.o(n,"staticRenderFns")&&o.d(t,"staticRenderFns",(function(){return n.staticRenderFns}))}}]);